<!DOCTYPE html>
<html lang="cn">
<head>
        <meta charset="utf-8" />
        <title>耕有田，读有书 - 数据分析</title>
        <link rel="stylesheet" href="http://forin-xyz.github.io/output/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
<a href="http://github.com/forin-xyz/">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="http://forin-xyz.github.io/output/">耕有田，读有书 </a></h1>
                <nav><ul>
                    <li><a href="http://forin-xyz.github.io/output/category/ji-qi-xue-xi.html">机器学习</a></li>
                    <li><a href="http://forin-xyz.github.io/output/category/python.html">Python</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="http://forin-xyz.github.io/output/2016/03/pythonshu-ju-fen-xi-biao-zhi-pandas.html">python数据分析包之pandas</a></h1>
<footer class="post-info">
        <abbr class="published" title="2016-03-04T10:20:00+08:00">
                发表于: 2016年03月04日 星期五
        </abbr>
		<br />
        <abbr class="modified" title="2016-03-04T19:30:00+08:00">
                修改于: 2016年03月04日 星期五
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://forin-xyz.github.io/output/author/forin-xyz.html">forin-xyz</a>
        </address>
<p>In <a href="http://forin-xyz.github.io/output/category/python.html">Python</a>.</p>
<p>tags: <a href="http://forin-xyz.github.io/output/tag/pandas.html">pandas</a> <a href="http://forin-xyz.github.io/output/tag/shu-ju-fen-xi.html">数据分析</a> <a href="http://forin-xyz.github.io/output/tag/python.html">python</a> </p>
</footer><!-- /.post-info --><h2>Seris</h2>
<p>相当于一个<strong>定长的有序字典</strong></p>
<h3>创建</h3>
<ol>
<li>
<p>任意的一维数据, 索引可以自动生成或者指定</p>
</li>
<li>
<p>也可以输入像字典一样的<strong>key-value</strong>数据, 这样<strong>key</strong>自动就变成了索引</p>
</li>
<li>
<p>Series对象和它的index都含有一个<code>name</code>属性</p>
<div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">s</span> <span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="kp">nan</span><span class="p">,</span> <span class="s">&#39;456&#39;</span><span class="p">,</span> <span class="s">&#39;xa&#39;</span><span class="p">])</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">s</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">6</span><span class="p">]:</span> 
<span class="mi">0</span>      <span class="mi">1</span>
<span class="mi">1</span>      <span class="mi">2</span>
<span class="mi">2</span>      <span class="mi">3</span>
<span class="mi">3</span>    <span class="n">NaN</span>
<span class="mi">4</span>    <span class="mi">456</span>
<span class="mi">5</span>     <span class="n">xa</span>
<span class="kp">dtype</span><span class="p">:</span> <span class="nb">object</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">15</span><span class="p">]:</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="kp">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;20150101&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">16</span><span class="p">]:</span> <span class="n">s2</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">16</span><span class="p">]:</span> 
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>    <span class="mi">0</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span>    <span class="mi">1</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span>    <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>    <span class="mi">3</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>    <span class="mi">4</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span>    <span class="mi">5</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">07</span>    <span class="mi">6</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mi">08</span>    <span class="mi">7</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mi">09</span>    <span class="mi">8</span>
<span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mi">10</span>    <span class="mi">9</span>
<span class="n">Freq</span><span class="p">:</span> <span class="n">D</span><span class="p">,</span> <span class="kp">dtype</span><span class="p">:</span> <span class="n">int32</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">17</span><span class="p">]:</span> <span class="n">s3</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abcdefg&#39;</span><span class="p">,</span><span class="nb">range</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="nb">ord</span><span class="p">(</span><span class="s">&#39;g&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">))))</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">18</span><span class="p">]:</span> <span class="n">s3</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">18</span><span class="p">]:</span> 
<span class="n">a</span>     <span class="mi">97</span>
<span class="n">b</span>     <span class="mi">98</span>
<span class="n">c</span>     <span class="mi">99</span>
<span class="n">d</span>    <span class="mi">100</span>
<span class="n">e</span>    <span class="mi">101</span>
<span class="n">f</span>    <span class="mi">102</span>
<span class="n">g</span>    <span class="mi">103</span>
<span class="kp">dtype</span><span class="p">:</span> <span class="n">int64</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">19</span><span class="p">]:</span> <span class="n">s3</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;ascii&#39;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">20</span><span class="p">]:</span> <span class="n">s3</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;symbo&#39;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">21</span><span class="p">]:</span> <span class="n">s3</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">21</span><span class="p">]:</span> 
<span class="n">symbo</span>
<span class="n">a</span>         <span class="mi">97</span>
<span class="n">b</span>         <span class="mi">98</span>
<span class="n">c</span>         <span class="mi">99</span>
<span class="n">d</span>        <span class="mi">100</span>
<span class="n">e</span>        <span class="mi">101</span>
<span class="n">f</span>        <span class="mi">102</span>
<span class="n">g</span>        <span class="mi">103</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">ascii</span><span class="p">,</span> <span class="kp">dtype</span><span class="p">:</span> <span class="n">int6</span>
</pre></div>


</li>
</ol>
<h3>更新值, 修改值 或者 设置值 update, modify, set</h3>
<p><code>s[key] = value</code> key -&gt; 对应的索引名</p>
<div class="highlight"><pre>In [101]: s3
Out[101]: 
symbo
a         97
b         98
c         99
d        100
e        101
f        102
g        103
Name: ascii, dtype: int64

In [102]: s3[&#39;g&#39;] += 1

In [103]: s3
Out[103]: 
symbo
a         97
b         98
c         99
d        100
e        101
f        102
g        104
Name: ascii, dtype: int64
</pre></div>


<h3>频数统计, 计数, 按值出现的次数统计</h3>
<p><code>s.value_counts()</code></p>
<div class="highlight"><pre>In [158]: s0 = pd.Series(np.random.randint(0, 7, size=10))

In [159]: s0
Out[159]: 
0    2
1    5
2    0
3    6
4    0
5    3
6    4
7    1
8    1
9    3
dtype: int32

In [160]: s0.value_counts()
Out[160]: 
3    2
1    2
0    2
6    1
5    1
4    1
2    1
dtype: int64
</pre></div>


<h3>字符串方法</h3>
<p><code>s.str.method_name()</code></p>
<div class="highlight"><pre>In [166]: ss = pd.Series([&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;Aaba&#39;, &#39;Baca&#39;, np.nan, &#39;CABA&#39;, &#39;dog&#39;, &#39;cat&#39;])

In [168]: ss.str.lower()
Out[168]: 
0       a
1       b
2       c
3    aaba
4    baca
5     NaN
6    caba
7     dog
8     cat
dtype: object
</pre></div>


<h2>DataFrame</h2>
<p><strong>表格</strong>型的数据结构, 由一个有序的行(row, 相当于index)和不同字段的列(column, 相当于key)组成, 基本上可以把DataFrame看成是共享同一个index的Series的集合.</p>
<h3>创建</h3>
<ol>
<li>
<p>可以输入一个类字典<strong>key-value</strong>类型, 字典的键对应于DataFrame的columns, 索引是自动生成的</p>
</li>
<li>
<p>也可以指定对应的index和columns, 缺失值由NaN补足</p>
</li>
<li>
<p>index, columns的类型是Index, 对应的列(columns)的类型是Series</p>
</li>
<li>
<p>data数据既可以是类字典的键值对, 也可以是任何的2维数据</p>
</li>
<li>
<p>使用<strong>IPython</strong>的话<code>Tab</code>键可以自动补全方法或者属性</p>
<div class="highlight"><pre>In [22]: data = {&#39;state&#39;:[&#39;Ohino&#39;,&#39;Ohino&#39;,&#39;Ohino&#39;,&#39;Nevada&#39;,&#39;Nevada&#39;],
        &#39;year&#39;:[2000,2001,2002,2001,2002],
        &#39;pop&#39;:[1.5,1.7,3.6,2.4,2.9]}
   ....:    ....: 
In [23]: df = pd.DataFrame(data)

In [24]: df
Out[24]: 
   pop   state  year
0  1.5   Ohino  2000
1  1.7   Ohino  2001
2  3.6   Ohino  2002
3  2.4  Nevada  2001
4  2.9  Nevada  2002

[5 rows x 3 columns]

In [27]: df2 = pd.DataFrame(data=data, index=list(&#39;abcde&#39;), columns=[&#39;year&#39;, &#39;state&#39;, &#39;pop&#39;, &#39;debt&#39;])

In [28]: df2
Out[28]: 
   year   state  pop debt
a  2000   Ohino  1.5  NaN
b  2001   Ohino  1.7  NaN
c  2002   Ohino  3.6  NaN
d  2001  Nevada  2.4  NaN
e  2002  Nevada  2.9  NaN

[5 rows x 4 columns]

In [29]: type(df2.index)
Out[29]: pandas.core.index.Index

In [30]: type(df2.columns)
Out[30]: pandas.core.index.Index

In [31]: type(df2[&#39;debt&#39;])
Out[31]: pandas.core.series.Series

In [32]: df.columns
Out[32]: Index([&#39;pop&#39;, &#39;state&#39;, &#39;year&#39;], dtype=&#39;object&#39;)

In [33]: df2.index
Out[33]: Index([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;], dtype=&#39;object&#39;)

In [34]: df2[&#39;pop&#39;]
Out[34]: 
a    1.5
b    1.7
c    3.6
d    2.4
e    2.9
Name: pop, dtype: float64

In [36]: df3 = pd.DataFrame(np.random.randn(6,4), index=pd.date_range(&#39;20160301&#39;, periods=6), columns=list(&#39;wxyz&#39;))

In [37]: df3
Out[37]: 
                   w         x         y         z
2016-03-01  0.189541 -0.663132  1.143200  0.407860
2016-03-02 -2.268193  0.804897  0.371822  0.218351
2016-03-03 -0.460397 -0.099081  1.352768  0.190879
2016-03-04  0.119887  0.810889 -0.305570  1.809606
2016-03-05  0.175106 -0.292139 -0.816183 -0.772443
2016-03-06  0.137480  0.162058  1.516405 -0.927173

[6 rows x 4 columns]

In [42]: df2.dtypes
Out[42]: 
year       int64
state     object
pop      float64
debt      object
dtype: object
</pre></div>


</li>
</ol>
<h3>查看数据</h3>
<ol>
<li>
<p>head(), tail()</p>
</li>
<li>
<p>index, columns, values分别对应行索引, 列键值 以及 二维数据</p>
</li>
<li>
<p>describe() 展示数据的关于列(columns)简单统计摘要</p>
</li>
<li>
<p>df.T 可以转置数据 transposing your data</p>
<div class="highlight"><pre>In [43]: df
Out[43]: 
   pop   state  year
0  1.5   Ohino  2000
1  1.7   Ohino  2001
2  3.6   Ohino  2002
3  2.4  Nevada  2001
4  2.9  Nevada  2002

[5 rows x 3 columns]

In [44]: df.head()
Out[44]: 
   pop   state  year
0  1.5   Ohino  2000
1  1.7   Ohino  2001
2  3.6   Ohino  2002
3  2.4  Nevada  2001
4  2.9  Nevada  2002

[5 rows x 3 columns]

In [45]: df.tail(2)
Out[45]: 
   pop   state  year
3  2.4  Nevada  2001
4  2.9  Nevada  2002

[2 rows x 3 columns]

In [46]: df.index
Out[46]: Int64Index([0, 1, 2, 3, 4], dtype=&#39;int64&#39;)

In [47]: df.columns
Out[47]: Index([&#39;pop&#39;, &#39;state&#39;, &#39;year&#39;], dtype=&#39;object&#39;)

In [48]: df.values
Out[48]: 
array([[1.5, &#39;Ohino&#39;, 2000],
       [1.7, &#39;Ohino&#39;, 2001],
       [3.6, &#39;Ohino&#39;, 2002],
       [2.4, &#39;Nevada&#39;, 2001],
       [2.9, &#39;Nevada&#39;, 2002]], dtype=object)

In [49]: df3
Out[49]: 
                   w         x         y         z
2016-03-01  0.189541 -0.663132  1.143200  0.407860
2016-03-02 -2.268193  0.804897  0.371822  0.218351
2016-03-03 -0.460397 -0.099081  1.352768  0.190879
2016-03-04  0.119887  0.810889 -0.305570  1.809606
2016-03-05  0.175106 -0.292139 -0.816183 -0.772443
2016-03-06  0.137480  0.162058  1.516405 -0.927173

[6 rows x 4 columns]

In [50]: df3.describe()
Out[50]: 
              w         x         y         z
count  6.000000  6.000000  6.000000  6.000000
mean  -0.351096  0.120582  0.543740  0.154513
std    0.971279  0.596545  0.955011  0.983688
min   -2.268193 -0.663132 -0.816183 -0.927173
25%   -0.315326 -0.243874 -0.136222 -0.531612
50%    0.128684  0.031489  0.757511  0.204615
75%    0.165700  0.644187  1.300376  0.360483
max    0.189541  0.810889  1.516405  1.809606

[8 rows x 4 columns]

In [51]: df.T
Out[51]: 
           0      1      2       3       4
pop      1.5    1.7    3.6     2.4     2.9
state  Ohino  Ohino  Ohino  Nevada  Nevada
year    2000   2001   2002    2001    2002

[3 rows x 5 columns]
</pre></div>


</li>
<li>
<p><code>sort_index(axis=0, ascending=True)</code>索引排序, axis=1, 排序columns, axis=0,排序index, ascending=False, 降序, 默认是升序</p>
<div class="highlight"><pre>In [52]: df
Out[52]: 
   pop   state  year
0  1.5   Ohino  2000
1  1.7   Ohino  2001
2  3.6   Ohino  2002
3  2.4  Nevada  2001
4  2.9  Nevada  2002

[5 rows x 3 columns]

In [53]: df.sort_index(axis=1, ascending=False)
Out[53]: 
   year   state  pop
0  2000   Ohino  1.5
1  2001   Ohino  1.7
2  2002   Ohino  3.6
3  2001  Nevada  2.4
4  2002  Nevada  2.9

[5 rows x 3 columns]
</pre></div>


</li>
<li>
<p><code>sort(columns, ascending=True)</code> 按值排序, columns=columns_name,可以接受一个值或者一个一维数据, ascending=False表示降序, 默认是升序</p>
<div class="highlight"><pre>In [60]: df3
Out[60]: 
                   w         x         y         z
2016-03-01  0.189541 -0.663132  1.143200  0.407860
2016-03-02 -2.268193  0.804897  0.371822  0.218351
2016-03-03 -0.460397 -0.099081  1.352768  0.190879
2016-03-04  0.119887  0.810889 -0.305570  1.809606
2016-03-05  0.175106 -0.292139 -0.816183 -0.772443
2016-03-06  0.137480  0.162058  1.516405 -0.927173

[6 rows x 4 columns]

In [61]: df3.sort(&#39;w&#39;)
Out[61]: 
                   w         x         y         z
2016-03-02 -2.268193  0.804897  0.371822  0.218351
2016-03-03 -0.460397 -0.099081  1.352768  0.190879
2016-03-04  0.119887  0.810889 -0.305570  1.809606
2016-03-06  0.137480  0.162058  1.516405 -0.927173
2016-03-05  0.175106 -0.292139 -0.816183 -0.772443
2016-03-01  0.189541 -0.663132  1.143200  0.407860

[6 rows x 4 columns]

In [62]: df3.sort(columns=&#39;w&#39;)
Out[62]: 
                   w         x         y         z
2016-03-02 -2.268193  0.804897  0.371822  0.218351
2016-03-03 -0.460397 -0.099081  1.352768  0.190879
2016-03-04  0.119887  0.810889 -0.305570  1.809606
2016-03-06  0.137480  0.162058  1.516405 -0.927173
2016-03-05  0.175106 -0.292139 -0.816183 -0.772443
2016-03-01  0.189541 -0.663132  1.143200  0.407860

[6 rows x 4 columns]

In [63]: df3.sort(columns=[&#39;w&#39;, &#39;x&#39;])
Out[63]: 
                   w         x         y         z
2016-03-02 -2.268193  0.804897  0.371822  0.218351
2016-03-03 -0.460397 -0.099081  1.352768  0.190879
2016-03-04  0.119887  0.810889 -0.305570  1.809606
2016-03-06  0.137480  0.162058  1.516405 -0.927173
2016-03-05  0.175106 -0.292139 -0.816183 -0.772443
2016-03-01  0.189541 -0.663132  1.143200  0.407860

[6 rows x 4 columns]
</pre></div>


</li>
</ol>
<h3>选择, 过滤, 查找</h3>
<ol>
<li>
<p>直接使用列名(column name), 等价与df. <em>column_name_</em></p>
<div class="highlight"><pre>In [64]: df3[&#39;w&#39;]
Out[64]: 
2016-03-01    0.189541
2016-03-02   -2.268193
2016-03-03   -0.460397
2016-03-04    0.119887
2016-03-05    0.175106
2016-03-06    0.137480
Freq: D, Name: w, dtype: float64
</pre></div>


</li>
<li>
<p>使用[], 可以对行(rows)进行切片, 集行选择</p>
<div class="highlight"><pre>In [67]: df3[0:3]
Out[67]: 
                   w         x         y         z
2016-03-01  0.189541 -0.663132  1.143200  0.407860
2016-03-02 -2.268193  0.804897  0.371822  0.218351
2016-03-03 -0.460397 -0.099081  1.352768  0.190879

[3 rows x 4 columns]

In [68]: df3[&#39;20160302&#39;:&#39;20160305&#39;]
Out[68]: 
                   w         x         y         z
2016-03-02 -2.268193  0.804897  0.371822  0.218351
2016-03-03 -0.460397 -0.099081  1.352768  0.190879
2016-03-04  0.119887  0.810889 -0.305570  1.809606
2016-03-05  0.175106 -0.292139 -0.816183 -0.772443

[4 rows x 4 columns]
</pre></div>


</li>
<li>
<p><code>df.loc[df.index[i]]</code> 获得一个横截面, 也就是某一行(row)的数据, 获取某一行的数据</p>
<div class="highlight"><pre>In [69]: df3.loc[df3.index[2]]
Out[69]: 
w   -0.460397
x   -0.099081
y    1.352768
z    0.190879
Name: 2016-03-03 00:00:00, dtype: float6
</pre></div>


</li>
<li>
<p><code>df.loc[:, ['A', 'B']]</code> 获取多列(columns)数据</p>
<div class="highlight"><pre>In [70]: df3.loc[:, [&#39;x&#39;, &#39;z&#39;]]
Out[70]: 
                   x         z
2016-03-01 -0.663132  0.407860
2016-03-02  0.804897  0.218351
2016-03-03 -0.099081  0.190879
2016-03-04  0.810889  1.809606
2016-03-05 -0.292139 -0.772443
2016-03-06  0.162058 -0.927173

[6 rows x 2 columns]
</pre></div>


</li>
<li>
<p><code>df.loc[df.index[1]:df.index[3], ['w', 'x']]</code> 获取多行多列数据</p>
<div class="highlight"><pre>In [73]: df3.loc[&#39;20160301&#39;:&#39;20160303&#39;, [&#39;w&#39;, &#39;x&#39;]]
Out[73]: 
                   w         x
2016-03-01  0.189541 -0.663132
2016-03-02 -2.268193  0.804897
2016-03-03 -0.460397 -0.099081

[3 rows x 2 columns]
</pre></div>


</li>
<li>
<p><code>df.loc[df.index[i], ['a', 'b']]</code> 获取指定行的多列数据, 放回的Series的name属性=df.index[i]</p>
<div class="highlight"><pre>In [78]: df3.loc[df3.index[0], [&#39;x&#39;, &#39;y&#39;]]
Out[78]: 
x   -0.663132
y    1.143200
Name: 2016-03-01 00:00:00, dtype: float64
</pre></div>


</li>
<li>
<p><code>df.loc[df.index[i], 'a']</code> or <code>df.at[df.index[i], 'a']</code> 获得对应行对应列的数据, 返回值为标量</p>
<div class="highlight"><pre>In [80]: df3.loc[&#39;20160301&#39;, &#39;x&#39;]
Out[80]: -0.6631320997645348

In [82]: df3.at[df3.index[0], &#39;x&#39;]
Out[82]: -0.6631320997645348
</pre></div>


</li>
<li>
<p><code>df.iloc[]</code> 按位置选择, 相当于将<code>df.loc[]</code>值换成了位置索引, 唯一的区别在于使用<code>:</code>符号不包含后值, 在<code>df.loc[]</code>中,索引值使用<code>:</code>是包含后值的.
    <code>df.iat[ix, cx]</code>等价于 <code>df.iloc[ix, cx]</code></p>
<div class="highlight"><pre># 等价于 df3.iloc[df3.index[1]], 下面类同
In [85]: df3.iloc[1]
Out[85]: 
w   -2.268193
x    0.804897
y    0.371822
z    0.218351
Name: 2016-03-02 00:00:00, dtype: float64

# 等价于 df3.iloc[df3.index[3], df3.columns[2]], 下面类同
In [86]: df3.iloc[3, 2]
Out[86]: -0.30557047056654313

In [87]: df3.iloc[3, 1:3]
Out[87]: 
x    0.810889
y   -0.305570
Name: 2016-03-04 00:00:00, dtype: float64

In [88]: df3.iloc[1:3, 1]
Out[88]: 
2016-03-02    0.804897
2016-03-03   -0.099081
Freq: D, Name: x, dtype: float64

In [89]: df3.iloc[1:3, 1:3]
Out[89]: 
                   x         y
2016-03-02  0.804897  0.371822
2016-03-03 -0.099081  1.352768

[2 rows x 2 columns]

In [91]: df3.loc[df3.index[1:3], df3.columns[1:3]]
Out[91]: 
                   x         y
2016-03-02  0.804897  0.371822
2016-03-03 -0.099081  1.352768

[2 rows x 2 columns]

In [92]: df3.iat[3, 2]
Out[92]: -0.30557047056654313
</pre></div>


</li>
<li>
<p>使用布林表达式进行查找, 过滤 <code>df[bool_expression]</code></p>
<ul>
<li>
<p><code>df[df['A'] &gt; 0]</code> 对某一列进行过滤</p>
<div class="highlight"><pre>In [94]: df3[df3[&#39;x&#39;] &gt; 0]
Out[94]: 
                   w         x         y         z
2016-03-02 -2.268193  0.804897  0.371822  0.218351
2016-03-04  0.119887  0.810889 -0.305570  1.809606
2016-03-06  0.137480  0.162058  1.516405 -0.927173

[3 rows x 4 columns]
</pre></div>


</li>
<li>
<p><code>df[df &gt; 0]</code> 把不满足条件的数据转换为NaN</p>
<div class="highlight"><pre>In [95]: df3[df3 &gt; 0]
Out[95]: 
                   w         x         y         z
2016-03-01  0.189541       NaN  1.143200  0.407860
2016-03-02       NaN  0.804897  0.371822  0.218351
2016-03-03       NaN       NaN  1.352768  0.190879
2016-03-04  0.119887  0.810889       NaN  1.809606
2016-03-05  0.175106       NaN       NaN       NaN
2016-03-06  0.137480  0.162058  1.516405       NaN

[6 rows x 4 columns]
</pre></div>


</li>
<li>
<p><code>df[df['A'].isin(['1', '2', '3'])]</code> 过滤, 选取对应列(column)中出现在列表中的数据</p>
<div class="highlight"><pre>In [96]: df4 = df3.copy()

In [98]: df4[&#39;v&#39;] = [&#39;one&#39;, &#39;two&#39;, &#39;three&#39;, &#39;four&#39;, &#39;five&#39;, &#39;six&#39;]

In [99]: df4
Out[99]: 
                   w         x         y         z      v
2016-03-01  0.189541 -0.663132  1.143200  0.407860    one
2016-03-02 -2.268193  0.804897  0.371822  0.218351    two
2016-03-03 -0.460397 -0.099081  1.352768  0.190879  three
2016-03-04  0.119887  0.810889 -0.305570  1.809606   four
2016-03-05  0.175106 -0.292139 -0.816183 -0.772443   five
2016-03-06  0.137480  0.162058  1.516405 -0.927173    six

[6 rows x 5 columns]

In [100]: df4[df4[&#39;v&#39;].isin([&#39;one&#39;, &#39;three&#39;])]
Out[100]: 
                   w         x         y         z      v
2016-03-01  0.189541 -0.663132  1.143200  0.407860    one
2016-03-03 -0.460397 -0.099081  1.352768  0.190879  three

[2 rows x 5 columns]
</pre></div>


</li>
<li>
<p><code>df[df[key].map(lambda x: x.startswith('B1'))]</code> 匿名函数过滤, x是对应列的各个值
    查找 <em>key</em> 列(column)以'B1'起始的项目.</p>
</li>
<li>
<p>&amp;, | 可以连接多个boolean表达式, 注意每个表达式必需使用括号括起来<code>df[(df['x'] == x) | (df['y'] == y)]</code></p>
</li>
</ul>
</li>
</ol>
<h3>修改值, 更新值, 设置值, update, set, modify</h3>
<ol>
<li>
<p>通过标签设置值, <code>df.at[]</code>, <code>df.loc[]</code> 与上面的查看数据方法类似</p>
</li>
<li>
<p>通过位置设置值, <code>df.iat[ix, cx]</code>, <code>df.iloc[]</code> 与上面通过位置查看数据方法类似</p>
</li>
<li>
<p>A where operation with setting, 通过布林表达式来修改值, 过滤并修改之</p>
<div class="highlight"><pre># 将所有指都转换为非正数
In [104]: df3[df3 &gt; 0] = -df3

In [105]: df3
Out[105]: 
                   w         x         y         z
2016-03-01 -0.189541 -0.663132 -1.143200 -0.407860
2016-03-02 -2.268193 -0.804897 -0.371822 -0.218351
2016-03-03 -0.460397 -0.099081 -1.352768 -0.190879
2016-03-04 -0.119887 -0.810889 -0.305570 -1.809606
2016-03-05 -0.175106 -0.292139 -0.816183 -0.772443
2016-03-06 -0.137480 -0.162058 -1.516405 -0.927173

[6 rows x 4 columns]
</pre></div>


</li>
</ol>
<h3>丢失的数据</h3>
<ol>
<li>
<p><code>df.dropna(how='any', subset=None)</code> 舍弃丢失的NaN值, how可以组织<code>any</code> or <code>all</code>, <code>subset</code>选择需要过滤的列(column)的列表</p>
<div class="highlight"><pre>In [107]: df3 = df3 + 1

In [109]: df5 = df3[df3 &gt; 0]

In [110]: df5
Out[110]: 
                   w         x         y         z
2016-03-01  0.810459  0.336868       NaN  0.592140
2016-03-02       NaN  0.195103  0.628178  0.781649
2016-03-03  0.539603  0.900919       NaN  0.809121
2016-03-04  0.880113  0.189111  0.694430       NaN
2016-03-05  0.824894  0.707861  0.183817  0.227557
2016-03-06  0.862520  0.837942       NaN  0.072827

[6 rows x 4 columns]

In [111]: df5.dropna(how=&#39;any&#39;)
Out[111]: 
                   w         x         y         z
2016-03-05  0.824894  0.707861  0.183817  0.227557

[1 rows x 4 columns]

In [114]: df5.dropna(how=&#39;any&#39;, subset=[&#39;x&#39;, &#39;y&#39;])
Out[114]: 
                   w         x         y         z
2016-03-02       NaN  0.195103  0.628178  0.781649
2016-03-04  0.880113  0.189111  0.694430       NaN
2016-03-05  0.824894  0.707861  0.183817  0.227557

[3 rows x 4 columns]
</pre></div>


</li>
<li>
<p><code>df.fillna(value=5)</code> 将NaN替换成指定的值, value可以是标量scalar, 或者字典, Series等键值对</p>
<div class="highlight"><pre>In [120]: df5.fillna(value=5)
Out[120]: 
                   w         x         y         z
2016-03-01  0.810459  0.336868  5.000000  0.592140
2016-03-02  5.000000  0.195103  0.628178  0.781649
2016-03-03  0.539603  0.900919  5.000000  0.809121
2016-03-04  0.880113  0.189111  0.694430  5.000000
2016-03-05  0.824894  0.707861  0.183817  0.227557
2016-03-06  0.862520  0.837942  5.000000  0.072827

[6 rows x 4 columns]

In [123]: df5.fillna(value={&#39;w&#39;: 5, &#39;x&#39;: 4})
Out[123]: 
                   w         x         y         z
2016-03-01  0.810459  0.336868       NaN  0.592140
2016-03-02  5.000000  0.195103  0.628178  0.781649
2016-03-03  0.539603  0.900919       NaN  0.809121
2016-03-04  0.880113  0.189111  0.694430       NaN
2016-03-05  0.824894  0.707861  0.183817  0.227557
2016-03-06  0.862520  0.837942       NaN  0.072827

[6 rows x 4 columns]
</pre></div>


</li>
<li>
<p><code>pd.isnull(df)</code> 获得哪些值是<code>nan</code></p>
<div class="highlight"><pre>In [125]: df5.isnull()
Out[125]: 
                w      x      y      z
2016-03-01  False  False   True  False
2016-03-02   True  False  False  False
2016-03-03  False  False   True  False
2016-03-04  False  False  False   True
2016-03-05  False  False  False  False
2016-03-06  False  False   True  False

[6 rows x 4 columns]
</pre></div>


</li>
</ol>
<h2>操作, 数据计算</h2>
<h3>统计数据</h3>
<h4>均值</h4>
<ol>
<li>
<p>列均值<code>df.mean()</code> columns mean</p>
<div class="highlight"><pre>In [126]: df5.mean()
Out[126]: 
w    0.783518
x    0.527967
y    0.502141
z    0.496659
dtype: float64
</pre></div>


</li>
<li>
<p>行均值<code>df.mean(1)</code> rows mean</p>
<div class="highlight"><pre>In [127]: df5.mean(1)
Out[127]: 
2016-03-01    0.579822
2016-03-02    0.534977
2016-03-03    0.749881
2016-03-04    0.587884
2016-03-05    0.486032
2016-03-06    0.591096
Freq: D, dtype: float64
</pre></div>


</li>
<li>
<p><code>df.sub(series, axis={0, 1, index, columns}, fill_value=5)</code> 算术方法, 减法 将对应行或者列的数据全部转换为<code>NaN</code>
类似的还有<code>df.add()</code>, <code>df.div()</code>, <code>df.mul()</code></p>
<p>In [132]: s5 = pd.Series(data=[np.nan, np.nan, 1, 3, 5, np.nan], index=pd.date_range('20160301', periods=6)) </p>
<p>In [133]: s5
Out[133]: 
2016-03-01   NaN
2016-03-02   NaN
2016-03-03     1
2016-03-04     3
2016-03-05     5
2016-03-06   NaN
Freq: D, dtype: float64</p>
<p>In [134]: df5
Out[134]: 
                   w         x         y         z
2016-03-01  0.810459  0.336868       NaN  0.592140
2016-03-02       NaN  0.195103  0.628178  0.781649
2016-03-03  0.539603  0.900919       NaN  0.809121
2016-03-04  0.880113  0.189111  0.694430       NaN
2016-03-05  0.824894  0.707861  0.183817  0.227557
2016-03-06  0.862520  0.837942       NaN  0.072827</p>
<p>[6 rows x 4 columns] </p>
<p>In [137]: df5.sub(s5, axis='index')
Out[137]: 
                   w         x         y         z
2016-03-01       NaN       NaN       NaN       NaN
2016-03-02       NaN       NaN       NaN       NaN
2016-03-03 -0.460397 -0.099081       NaN -0.190879
2016-03-04 -2.119887 -2.810889 -2.305570       NaN
2016-03-05 -4.175106 -4.292139 -4.816183 -4.772443
2016-03-06       NaN       NaN       NaN       NaN</p>
<p>[6 rows x 4 columns]</p>
</li>
</ol>
<h4>申请可调有对象, apply callable object, Applay</h4>
<ol>
<li>
<p>累积和 <code>df.apply(np.cumsum)</code>, 不同于直接调用<code>np.cumsum(arr)</code>的地方是这里会忽略掉NaN值</p>
<div class="highlight"><pre>In [138]: df5
Out[138]: 
                   w         x         y         z
2016-03-01  0.810459  0.336868       NaN  0.592140
2016-03-02       NaN  0.195103  0.628178  0.781649
2016-03-03  0.539603  0.900919       NaN  0.809121
2016-03-04  0.880113  0.189111  0.694430       NaN
2016-03-05  0.824894  0.707861  0.183817  0.227557
2016-03-06  0.862520  0.837942       NaN  0.072827

[6 rows x 4 columns]

In [140]: df5.apply(np.cumsum)
Out[140]: 
                   w         x         y         z
2016-03-01  0.810459  0.336868       NaN  0.592140
2016-03-02       NaN  0.531971  0.628178  1.373789
2016-03-03  1.350061  1.432890       NaN  2.182910
2016-03-04  2.230174  1.622001  1.322607       NaN
2016-03-05  3.055068  2.329863  1.506424  2.410467
2016-03-06  3.917588  3.167804       NaN  2.483294

[6 rows x 4 columns]
</pre></div>


</li>
<li>
<p><code>lambda</code>函数, 匿名函数的参数对于对应的列(column)Series</p>
<div class="highlight"><pre>In [141]: df5.apply(lambda x: x.max() - x.min())
Out[141]: 
w    0.340510
x    0.711808
y    0.510612
z    0.736294
dtype: float64
</pre></div>


</li>
</ol>
<h4>计数, 按类型计数</h4>
<p><code>df['a'].value_counts()</code> 单列统计</p>
<p><code>df.groupby([col_list]).count().iloc[:, 0]</code> 多列统计</p>
<p><code>df[df['a'] == a]['b'].value_counts()</code> 这个也可以进行多列统计</p>
<p><code>df[(df['a'] == a) &amp; df['b'] == b].count()</code></p>
<h4>字符串方法</h4>
<p><code>df.str.method_name()</code></p>
<h3>Merge, 归并, 合并</h3>
<h4>连接, concat</h4>
<p><code>pd.concat(pandas_object_list)</code> 把元素连接在一起</p>
<div class="highlight"><pre>In [171]: dfm = pd.DataFrame(np.random.randint(1, 10, size=(10, 4)))

In [172]: dfm
Out[172]: 
   0  1  2  3
0  7  1  3  4
1  9  5  5  1
2  1  2  2  4
3  7  6  1  4
4  9  6  2  4
5  3  2  1  1
6  8  5  3  9
7  7  3  4  3
8  2  1  2  9
9  9  3  5  5

[10 rows x 4 columns]

In [175]: pieces = [dfm[:], dfm[3:7], dfm[7:]]

In [176]: pd.concat(pieces)
Out[176]: 
   0  1  2  3
0  7  1  3  4
1  9  5  5  1
2  1  2  2  4
3  7  6  1  4
4  9  6  2  4
5  3  2  1  1
6  8  5  3  9
7  7  3  4  3
8  2  1  2  9
9  9  3  5  5
3  7  6  1  4
4  9  6  2  4
5  3  2  1  1
6  8  5  3  9
7  7  3  4  3
8  2  1  2  9
9  9  3  5  5

[17 rows x 4 columns]
</pre></div>


<h4>join, 联合, 多表合并</h4>
<p><code>pd.merge(df1, df2, on='key')</code></p>
<div class="highlight"><pre>In [177]: left = pd.DataFrame({&#39;key&#39;: [&#39;foo&#39;, &#39;foo&#39;], &#39;lval&#39;: [1, 2]})

In [178]: right = pd.DataFrame({&#39;key&#39;: [&#39;foo&#39;, &#39;foo&#39;], &#39;rval&#39;: [4, 5]})

In [179]: left
Out[179]: 
   key  lval
0  foo     1
1  foo     2

[2 rows x 2 columns]

In [180]: right
Out[180]: 
   key  rval
0  foo     4
1  foo     5

[2 rows x 2 columns]

In [181]: pd.merge(left, right, on=&#39;key&#39;)
Out[181]: 
   key  lval  rval
0  foo     1     4
1  foo     1     5
2  foo     2     4
3  foo     2     5

[4 rows x 3 columns]

In [182]: right = pd.DataFrame({&#39;key&#39;: [&#39;foo&#39;, &#39;foo&#39;, &#39;jar&#39;], &#39;rval&#39;: [4, 5, 6]})

In [183]: pd.merge(left, right, on=&#39;key&#39;)
Out[183]: 
   key  lval  rval
0  foo     1     4
1  foo     1     5
2  foo     2     4
3  foo     2     5

[4 rows x 3 columns]
</pre></div>


<h4>添加, Append</h4>
<p><code>df.append(series-like, ignore_index=True)</code></p>
<p><code>df.append({index: series-like.values})</code></p>
<div class="highlight"><pre>In [184]: dfm
Out[184]: 
   0  1  2  3
0  7  1  3  4
1  9  5  5  1
2  1  2  2  4
3  7  6  1  4
4  9  6  2  4
5  3  2  1  1
6  8  5  3  9
7  7  3  4  3
8  2  1  2  9
9  9  3  5  5

[10 rows x 4 columns]

In [186]: dfm.append(dfm.iloc[3])
Out[186]: 
   0  1  2  3
0  7  1  3  4
1  9  5  5  1
2  1  2  2  4
3  7  6  1  4
4  9  6  2  4
5  3  2  1  1
6  8  5  3  9
7  7  3  4  3
8  2  1  2  9
9  9  3  5  5
3  7  6  1  4

[11 rows x 4 columns]

In [187]: dfm.append(dfm.iloc[3], ignore_index=True)
Out[187]: 
    0  1  2  3
0   7  1  3  4
1   9  5  5  1
2   1  2  2  4
3   7  6  1  4
4   9  6  2  4
5   3  2  1  1
6   8  5  3  9
7   7  3  4  3
8   2  1  2  9
9   9  3  5  5
10  7  6  1  4

[11 rows x 4 columns]
</pre></div>


<h3>Grouping, 分组联合, 合并</h3>
<ol>
<li><code>df.groupby(columns)</code><div class="highlight"><pre>In [188]:  dfg = pd.DataFrame({&#39;A&#39; : [&#39;foo&#39;, &#39;bar&#39;, &#39;foo&#39;, &#39;bar&#39;,
   ....:                           &#39;foo&#39;, &#39;bar&#39;, &#39;foo&#39;, &#39;foo&#39;],
   ....:                    &#39;B&#39; : [&#39;one&#39;, &#39;one&#39;, &#39;two&#39;, &#39;three&#39;,
   ....:                           &#39;two&#39;, &#39;two&#39;, &#39;one&#39;, &#39;three&#39;],
   ....:                    &#39;C&#39; : np.random.randn(8),
   ....:                    &#39;D&#39; : np.random.randn(8)})
   ....: 
   .....:    .....:    .....:    .....:    .....: 
In [190]: dfg
Out[190]: 
     A      B         C         D
0  foo    one -1.637388  0.691315
1  bar    one -1.036337  0.298661
2  foo    two -0.653040 -1.769153
3  bar  three  1.761951 -0.618460
4  foo    two  0.300811  0.721890
5  bar    two  0.390548  1.124015
6  foo    one  0.798055 -0.577885
7  foo  three  0.696769 -0.552198

[8 rows x 4 columns]

In [191]: dfg.groupby(&#39;A&#39;).sum()
Out[191]: 
            C         D
A                      
bar  1.116162  0.804216
foo -0.494794 -1.486030

[2 rows x 2 columns]

In [192]: dfg.groupby([&#39;A&#39;, &#39;B&#39;]).sum()
Out[192]: 
                  C         D
A   B                        
bar one   -1.036337  0.298661
    three  1.761951 -0.618460
    two    0.390548  1.124015
foo one   -0.839333  0.113431
    three  0.696769 -0.552198
    two   -0.352229 -1.047263

[6 rows x 2 columns]
</pre></div>


</li>
</ol>
<h3>改变形状 Reshaping</h3>
<h4>Stack 栈</h4>
<ol>
<li>
<p><code>df.stack()</code> 将DataFrame转换成多列索引的Series</p>
<p>In [193]: tuples = list(zip(*[['bar', 'bar', 'baz', 'baz',
   ....:                      'foo', 'foo', 'qux', 'qux'],
   ....:                     ['one', 'two', 'one', 'two',
   ....:                      'one', 'two', 'one', 'two']]))
   .....:    .....:    .....: 
In [194]: index = pd.MultiIndex.from_tuples(tuples, names=['first', 'second'])</p>
<p>In [195]: dfr = pd.DataFrame(np.random.randn(8, 2), index=index, columns=['A', 'B'])</p>
<p>In [196]: dfr
Out[196]: 
                     A         B
first second                  <br />
bar   one     1.984268 -0.628256
      two     0.424702 -0.516971
baz   one     1.308790  0.221231
      two     1.267427 -0.849810
foo   one     0.321839 -0.793417
      two     0.314654 -0.604699
qux   one    -0.799181 -1.247869
      two     0.111125 -0.884299</p>
<p>[8 rows x 2 columns]</p>
<p>In [197]: dfr[:4]
Out[197]: 
                     A         B
first second                  <br />
bar   one     1.984268 -0.628256
      two     0.424702 -0.516971
baz   one     1.308790  0.221231
      two     1.267427 -0.849810</p>
<p>[4 rows x 2 columns]</p>
<p>In [198]: stacked = dfr.stack()</p>
<p>In [199]: stacked
Out[199]: 
first  second <br />
bar    one     A    1.984268
               B   -0.628256
       two     A    0.424702
               B   -0.516971
baz    one     A    1.308790
               B    0.221231
       two     A    1.267427
               B   -0.849810
foo    one     A    0.321839
               B   -0.793417
       two     A    0.314654
               B   -0.604699
qux    one     A   -0.799181
               B   -1.247869
       two     A    0.111125
               B   -0.884299
dtype: float64</p>
<p>In [200]: dfr
Out[200]: 
                     A         B
first second                  <br />
bar   one     1.984268 -0.628256
      two     0.424702 -0.516971
baz   one     1.308790  0.221231
      two     1.267427 -0.849810
foo   one     0.321839 -0.793417
      two     0.314654 -0.604699
qux   one    -0.799181 -1.247869
      two     0.111125 -0.884299</p>
<p>[8 rows x 2 columns]</p>
<p>In [201]: type(stacked)
Out[201]: pandas.core.series.Series</p>
</li>
<li>
<p><code>s.unstack()</code> 将Series默认按照最后一个level进行解栈,转换为DataFrame格式</p>
<div class="highlight"><pre>In [202]: stacked.unstack()
Out[202]: 
                     A         B
first second                    
bar   one     1.984268 -0.628256
      two     0.424702 -0.516971
baz   one     1.308790  0.221231
      two     1.267427 -0.849810
foo   one     0.321839 -0.793417
      two     0.314654 -0.604699
qux   one    -0.799181 -1.247869
      two     0.111125 -0.884299

[8 rows x 2 columns]

In [203]: stacked.unstack(0)
Out[203]: 
first          bar       baz       foo       qux
second                                          
one    A  1.984268  1.308790  0.321839 -0.799181
       B -0.628256  0.221231 -0.793417 -1.247869
two    A  0.424702  1.267427  0.314654  0.111125
       B -0.516971 -0.849810 -0.604699 -0.884299

[4 rows x 4 columns]

In [204]: stacked.unstack(1)
Out[204]: 
second        one       two
first                      
bar   A  1.984268  0.424702
      B -0.628256 -0.516971
baz   A  1.308790  1.267427
      B  0.221231 -0.849810
foo   A  0.321839  0.314654
      B -0.793417 -0.604699
qux   A -0.799181  0.111125
      B -1.247869 -0.884299

[8 rows x 2 columns]
</pre></div>


</li>
</ol>
<h3>数据透视表 Pivot Tables</h3>
<p><code>pd.pivot_table(df, values='D', rows=['A', 'B'], cols=['C'])</code> rows使用哪几列的数据作为行(row)索引(index), cols表示使用哪几列的数据作为列(columns)索引(columns), values表是取哪一列的数据作为统计数据.</p>
<div class="highlight"><pre>In [207]: dfp = pd.DataFrame({&#39;A&#39; : [&#39;one&#39;, &#39;one&#39;, &#39;two&#39;, &#39;three&#39;] * 3,
   .....:                    &#39;B&#39; : [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;] * 4,
   .....:                    &#39;C&#39; : [&#39;foo&#39;, &#39;foo&#39;, &#39;foo&#39;, &#39;bar&#39;, &#39;bar&#39;, &#39;bar&#39;] * 2,
   .....:                    &#39;D&#39; : np.random.randn(12),
   .....:                    &#39;E&#39; : np.random.randn(12)})
   .....:    .....:    .....:    .....: 
In [208]: dfp
Out[208]: 
        A  B    C         D         E
0     one  A  foo  0.085550  1.100278
1     one  B  foo  0.291772  2.052441
2     two  C  foo -0.765489  1.455540
3   three  A  bar -0.003229  0.934319
4     one  B  bar -0.177889 -0.651707
5     one  C  bar  1.436878  0.430591
6     two  A  foo  0.018769 -0.642482
7   three  B  foo  0.078693 -1.662352
8     one  C  foo -0.692468  0.290056
9     one  A  bar  0.482921  1.457736
10    two  B  bar  0.046731  0.249600
11  three  C  bar -0.550309 -1.645258

[12 rows x 5 columns]

In [211]: dfp.pivot_table(values=&#39;D&#39;, rows=[&#39;A&#39;, &#39;B&#39;], cols=[&#39;C&#39;])
Out[211]: 
C             bar       foo
A     B                    
one   A  0.482921  0.085550
      B -0.177889  0.291772
      C  1.436878 -0.692468
three A -0.003229       NaN
      B       NaN  0.078693
      C -0.550309       NaN
two   A       NaN  0.018769
      B  0.046731       NaN
      C       NaN -0.765489

[9 rows x 2 columns]
</pre></div>


<h3>时间序列 Time Series</h3>
<h3>直接描述, 断言, Categoricals</h3>
<h3>画图 plotting</h3>
<p><code>s.plot()</code></p>
<p><code>df.plot()</code></p>
<h3>数据导入导出 Getting Date In/Out</h3>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://forin-xyz.github.io/tutorial.html">我的导航</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="http://weibo.com/u/1756830393">微博</a></li>
                            <li><a href="http://github.com/forin-xyz">github</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
        </footer><!-- /#contentinfo -->

</body>
</html>